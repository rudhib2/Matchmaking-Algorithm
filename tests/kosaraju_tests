#include <catch2/catch_test_macros.hpp>

#include "../src/kosaraju.h"
#include <algorithm>
#include <iostream>
#include <string>
#include <vector>
#include <set>

//CALCULATING PREF & ATTRIB SCORES
TEST_CASE("CalcPrefScore Test 1 ~ test first 10 IDs", "[weight=1]") {
    std::cout << "test working" << std::endl;
    std::vector<std::vector<int>> prefs  = file_to_prefvect("../tests/CS225_matchmaking.csv");
    std::cout << "here" << std::endl;
        REQUIRE(pref_score[0] = 180);
        REQUIRE(pref_score[1] = 360);
        REQUIRE(pref_score[2] = 340);
        REQUIRE(pref_score[3] = 370);
        REQUIRE(pref_score[4] = 180);
        REQUIRE(pref_score[5] = 320);
        REQUIRE(pref_score[6] = 240);
        REQUIRE(pref_score[7] = 350);
        REQUIRE(pref_score[8] = 320);
        REQUIRE(pref_score[9] = 290);
}

TEST_CASE("CalcAttribScore Test 1 ~ test first 10 IDs", "[weight=1]") {
    std::cout << "test working" << std::endl;
    std::vector<std::vector<int>> prefs  = file_to_prefvect("../tests/CS225_matchmaking.csv");
    std::cout << "here" << std::endl;
        REQUIRE(attrib_score[0] = 356);
        REQUIRE(attrib_score[1] = 474);
        REQUIRE(attrib_score[2] = 114);
        REQUIRE(attrib_score[3] = 271);
        REQUIRE(attrib_score[4] = 474);
        REQUIRE(attrib_score[5] = 458);
        REQUIRE(attrib_score[6] = 509);
        REQUIRE(attrib_score[7] = 427);
        REQUIRE(attrib_score[8] = 356);
        REQUIRE(attrib_score[9] = 271);
}



//DESIRABILITY TESTS
//Notes ~
    //we will have a vector called desirability_rank where index corresponds to iid and the value is the rank
    //we will have a vector of str called category where index corresponds to iid and value is either "high", "average", or "low"
TEST_CASE("Desirability Test 1 ~ test top 10 IDs in high category", "[weight=1]") {
    std::cout << "test working" << std::endl;
    std::cout << "testing if accurate desirability_rank & accurate category(high)"
    std::vector<std::vector<int>> prefs  = file_to_prefvect("../tests/CS225_matchmaking.csv");
    std::cout << "here" << std::endl;
        //this means for the key 171 the value should be 1 (if this is a map)
            //have to map each id to the rank
        REQUIRE(desirability_rank[171] = 1);
        REQUIRE(category[171] = "high");

        REQUIRE(desirability_rank[220] = 1);
        REQUIRE(category[220] = "high");

        REQUIRE(desirability_rank[226] = 1);
        REQUIRE(category[226] = "high");

        REQUIRE(desirability_rank[342] = 1);
        REQUIRE(category[342] = "high");

        REQUIRE(desirability_rank[492] = 1);
        REQUIRE(category[492] = "high");

        REQUIRE(desirability_rank[527] = 1);
        REQUIRE(category[527] = "high");

        REQUIRE(desirability_rank[548] = 1);
        REQUIRE(category[548] = "high");

        REQUIRE(desirability_rank[208] = 8);
        REQUIRE(category[208] = "high");

        REQUIRE(desirability_rank[458] = 8);
        REQUIRE(category[458] = "high");

        REQUIRE(desirability_rank[99] = 10);
        REQUIRE(category[99] = "high");
}

TEST_CASE("Desirability Test 2 ~ test top 10 IDs in average category", "[weight=1]") {
    std::cout << "test working" << std::endl;
    std::cout << "testing if accurate desirability_rank & accurate category(average)"
    std::vector<std::vector<int>> prefs  = file_to_prefvect("../tests/CS225_matchmaking.csv");
    std::cout << "here" << std::endl;
        REQUIRE(desirability_rank[199] = 167);
        REQUIRE(category[199] = "average");

        REQUIRE(desirability_rank[201] = 167);
        REQUIRE(category[201] = "average");

        REQUIRE(desirability_rank[221] = 167);
        REQUIRE(category[221] = "average");

        REQUIRE(desirability_rank[235] = 167);
        REQUIRE(category[235] = "average");

        REQUIRE(desirability_rank[237] = 167);
        REQUIRE(category[237] = "average");

        REQUIRE(desirability_rank[254] = 167);
        REQUIRE(category[254] = "average");

        REQUIRE(desirability_rank[295] = 167);
        REQUIRE(category[295] = "average");

        REQUIRE(desirability_rank[299] = 167);
        REQUIRE(category[299] = "average");

        REQUIRE(desirability_rank[303] = 167);
        REQUIRE(category[303] = "average");

        REQUIRE(desirability_rank[320] = 167);
        REQUIRE(category[320] = "average");
}


TEST_CASE("Desirability Test 3 ~ test top 10 IDs in low category", "[weight=1]") {
    std::cout << "test working" << std::endl;
    std::cout << "testing if accurate desirability_rank & accurate category(low)"
    std::vector<std::vector<int>> prefs  = file_to_prefvect("../tests/CS225_matchmaking.csv");
    std::cout << "here" << std::endl;
        REQUIRE(desirability_rank[68] = 356);
        REQUIRE(category[68] = "low");

        REQUIRE(desirability_rank[70] = 356);
        REQUIRE(category[70] = "low");

        REQUIRE(desirability_rank[73] = 356);
        REQUIRE(category[73] = "low");

        REQUIRE(desirability_rank[81] = 356);
        REQUIRE(category[81] = "low");

        REQUIRE(desirability_rank[91] = 356);
        REQUIRE(category[91] = "low");

        REQUIRE(desirability_rank[114] = 356);
        REQUIRE(category[114] = "low");

        REQUIRE(desirability_rank[123] = 356);
        REQUIRE(category[123] = "low");

        REQUIRE(desirability_rank[128] = 356);
        REQUIRE(category[128] = "low");

        REQUIRE(desirability_rank[172] = 356);
        REQUIRE(category[172] = "low");

        REQUIRE(desirability_rank[184] = 356);
        REQUIRE(category[184] = "low");
}


//STANDARDS TESTS
//Notes ~
    //we will have a vector called standards_rank where index corresponds to iid and the value is the rank
    //we will have a vector of str called category where index corresponds to iid and value is either "high", "average", or "low"
TEST_CASE("Standards Test 1 ~ test top 10 IDs in high category", "[weight=1]") {
    std::cout << "test working" << std::endl;
    std::cout << "testing if accurate standards_rank & accurate category(high)"
    std::vector<std::vector<int>> prefs  = file_to_prefvect("../tests/CS225_matchmaking.csv");
    std::cout << "here" << std::endl;
        REQUIRE(standards_rank[200] = 1);
        REQUIRE(category[200] = "high");

        REQUIRE(standards_rank[107] = 2);
        REQUIRE(category[107] = "high");

        REQUIRE(standards_rank[155] = 3);
        REQUIRE(category[155] = "high");

        REQUIRE(standards_rank[205] = 3);
        REQUIRE(category[205] = "high");

        REQUIRE(standards_rank[138] = 5);
        REQUIRE(category[138] = "high");

        REQUIRE(standards_rank[232] = 5);
        REQUIRE(category[232] = "high");

        REQUIRE(standards_rank[332] = 5);
        REQUIRE(category[332] = "high");

        REQUIRE(standards_rank[350] = 5);
        REQUIRE(category[350] = "high");

        REQUIRE(standards_rank[513] = 5);
        REQUIRE(category[513] = "high");

        REQUIRE(standards_rank[22] = 10);
        REQUIRE(category[22] = "high");
}	

TEST_CASE("Standards Test 2 ~ test top 10 IDs in average category", "[weight=1]") {
    std::cout << "test working" << std::endl;
    std::cout << "testing if accurate standards_rank & accurate category(average)"
    std::vector<std::vector<int>> prefs  = file_to_prefvect("../tests/CS225_matchmaking.csv");
    std::cout << "here" << std::endl;
        REQUIRE(standards_rank[63] = 180);
        REQUIRE(category[63] = "average");

        REQUIRE(standards_rank[78] = 180);
        REQUIRE(category[78] = "average");

        REQUIRE(standards_rank[81] = 180);
        REQUIRE(category[81] = "average");

        REQUIRE(standards_rank[89] = 180);
        REQUIRE(category[89] = "average");

        REQUIRE(standards_rank[99] = 180);
        REQUIRE(category[99] = "average");

        REQUIRE(standards_rank[158] = 180);
        REQUIRE(category[158] = "average");

        REQUIRE(standards_rank[166] = 180);
        REQUIRE(category[166] = "average");

        REQUIRE(standards_rank[175] = 180);
        REQUIRE(category[175] = "average");

        REQUIRE(standards_rank[187] = 180);
        REQUIRE(category[187] = "average");

        REQUIRE(standards_rank[217] = 180);
        REQUIRE(category[217] = "average");
}	


TEST_CASE("Standards Test 3 ~ test top 10 IDs in low category", "[weight=1]") {
    std::cout << "test working" << std::endl;
    std::cout << "testing if accurate standards_rank & accurate category(low)"
    std::vector<std::vector<int>> prefs  = file_to_prefvect("../tests/CS225_matchmaking.csv");
    std::cout << "here" << std::endl;
        REQUIRE(standards_rank[476] = 343);
        REQUIRE(category[476] = "low");

        REQUIRE(standards_rank[483] = 343);
        REQUIRE(category[483] = "low");

        REQUIRE(standards_rank[514] = 343);
        REQUIRE(category[514] = "low");

        REQUIRE(standards_rank[520] = 343);
        REQUIRE(category[520] = "low");

        REQUIRE(standards_rank[521] = 343);
        REQUIRE(category[521] = "low");

        REQUIRE(standards_rank[540] = 343);
        REQUIRE(category[540] = "low");

        REQUIRE(standards_rank[542] = 343);
        REQUIRE(category[542] = "low");

        REQUIRE(standards_rank[550] = 343);
        REQUIRE(category[550] = "low");

        REQUIRE(standards_rank[7] = 372);
        REQUIRE(category[7] = "low");

        REQUIRE(standards_rank[16] = 372);
        REQUIRE(category[16] = "low");
}	
	